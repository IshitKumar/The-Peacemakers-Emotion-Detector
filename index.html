<script>
  const form = document.getElementById('mood-form');
  const chatbox = document.getElementById('chatbox');
  const resetBtn = document.getElementById('reset-btn');
  const settingsBtn = document.getElementById('settings-btn');
  const settingsModal = document.getElementById('settings-modal');
  const closeSettings = document.getElementById('close-settings');

  function addChatMessage(message, type = 'bot') {
    const msg = document.createElement('div');
    msg.classList.add('chat-message', type);
    msg.innerHTML = message;
    chatbox.appendChild(msg);
    chatbox.scrollTop = chatbox.scrollHeight;
  }

  function randomGradient() {
    const colors = ['#69DDFF', '#96CDFF', '#D8E1FF', '#DBBADD'];
    const randomColor = colors[Math.floor(Math.random() * colors.length)];
    const randomSecond = colors[Math.floor(Math.random() * colors.length)];
    document.body.style.background = `linear-gradient(135deg, ${randomColor}, ${randomSecond})`;
  }

  randomGradient();

  settingsBtn.addEventListener('click', () => settingsModal.style.display = 'block');
  closeSettings.addEventListener('click', () => settingsModal.style.display = 'none');

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    chatbox.innerHTML = "";
    randomGradient();

    const mood = document.getElementById('mood').value.toLowerCase();
    const energy = document.getElementById('energy').value.toLowerCase();
    const stress = document.getElementById('stress').value.toLowerCase();
    const social = document.getElementById('social').value.toLowerCase();
    const motivation = document.getElementById('motivation').value.toLowerCase();

    let reply = "";

    if (mood.includes('angry') || stress.includes('high') || mood.includes('irritated')) {
      reply = `
        ğŸ’¬ You seem **angry or stressed**, and thatâ€™s completely okay. Everyone feels this way sometimes.<br><br>
        Here are some simple steps to help you calm down and feel better:
        <ul>
          <li>ğŸ§˜ Take deep breaths â€” inhale slowly for 4 seconds, hold for 2, and exhale for 6.</li>
          <li>ğŸš¶â€â™‚ï¸ Step away from whatâ€™s bothering you. A short walk or change of place helps your brain reset.</li>
          <li>ğŸ§ Listen to soft music or something that relaxes your mind.</li>
          <li>âœï¸ Write or draw how you feel â€” it helps release bottled-up anger.</li>
          <li>ğŸ’¬ Talk to someone you trust and explain how you feel calmly.</li>
          <li>ğŸ’¦ Drink a glass of water â€” it helps both your body and mind cool down.</li>
        </ul>
        Youâ€™re strong enough to handle this. Take one small step right now â€” even a deep breath counts ğŸ’™
      `;
    }

    else if (mood.includes('sad') || energy.includes('low')) {
      reply = `
        ğŸ’¬ You seem **low or sad** today. Thatâ€™s okay â€” emotions come and go.<br><br>
        Try these steps to lift your mood:
        <ul>
          <li>ğŸŒ¤ï¸ Go outside for a few minutes â€” sunlight helps boost mood.</li>
          <li>ğŸ—£ï¸ Talk to someone who makes you smile, even a quick chat helps.</li>
          <li>ğŸ¨ Do something small and creative â€” draw, doodle, or listen to music.</li>
          <li>ğŸ¾ Spend time with a pet or watch something funny online.</li>
        </ul>
        Remember: you donâ€™t need to fix everything today â€” just take care of yourself gently ğŸ’›
      `;
    }

    else if (mood.includes('happy') || energy.includes('high')) {
      reply = `
        ğŸ’¬ Youâ€™re **feeling bright and energetic!** â˜€ï¸<br><br>
        Keep this energy alive:
        <ul>
          <li>ğŸŒŸ Share your positivity â€” compliment someone or help a friend.</li>
          <li>ğŸ¯ Start a small project or goal youâ€™ve been postponing.</li>
          <li>ğŸ’ƒ Move your body â€” dance, stretch, or go for a walk.</li>
        </ul>
        Youâ€™re radiating good vibes â€” spread them wherever you go âœ¨
      `;
    }

    else {
      reply = `
        ğŸ’¬ Your emotions seem balanced and thoughtful ğŸŒ¿<br><br>
        Keep it up by:
        <ul>
          <li>ğŸ§˜ Doing mindfulness or deep breathing for 2 minutes.</li>
          <li>ğŸ“– Writing down one good thing about your day.</li>
          <li>ğŸŒˆ Taking small breaks between work or study.</li>
        </ul>
        Peace starts within â€” and youâ€™re doing great at it ğŸ’–
      `;
    }

    setTimeout(() => addChatMessage(reply, 'bot'), 500);
  });

  resetBtn.addEventListener('click', () => {
    form.reset();
    chatbox.innerHTML = "";
    randomGradient();
  });
</script>
